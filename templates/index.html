<!DOCTYPE html>
<!-- Coding By CodingNepal - youtube.com/codingnepal -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MTX hackathon</title>
  <link rel="stylesheet" href="static/css/upload.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
</head>
<body>
  <div class="App">
    <header class="App-header">
      <form id="upload-file">
        <input
          id="imageinput"
          type="file"
          name="image"
        />
      </form>
      <button class="button" name="send" id="sendbutton" onclick="show()">Send</button>
    <img class="col-xl-6" id="target" src="static/image/loader.gif" alt="Picture of 1" width="200" height="200"/>
      <div id="imageDiv">
      </div>
  </header>
  </div>
  <script>
    document.getElementById('sendbutton').onclick = function () {
      $("#target").show();
      var size = document.getElementById('imageinput').files[0].size;
      console.log(size);
      if (size > 961454){
        size = 31000;
      }
      else {
        size = 8000;
      }
      setTimeout(function() {
      $("#target").hide();
      document.getElementById('imageDiv').innerHTML = '<div><br> <img width="600" height="400" src="static/image/plot.png">  <br><p>  </p> </div>'; 
      }, size);
      input = $("#imageinput")[0];
        if (input.files && input.files[0]) {
          let formData = new FormData();
          formData.append("video", input.files[0]);
            $.ajax({
                url: "/detect", // fix this to your liking
                type: "POST",
                data: formData,
                cache: false,
                processData: false,
                contentType: false,
                success: function(data) {
                    console.log(data);
                },
            });
        }
    }
</script>
<script>
  function hideFunction() {
    document.getElementById('target').style.display = 'none';
    console.log("loaded");
  }
  window.onload = hideFunction;
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</body>
</html>